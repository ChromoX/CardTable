<!doctype html>

<html lang="en">
    <head>
        <meta charset="utf-8">

        <title>CardTable</title>
        <meta name="description" content="CardTable">
        <script src="lib/svg.js"></script>
        <script src="lib/svg.draggable.js"></script>
        <script src="lib/svg.import.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

        <script type="text/javascript">
            $(document).ready(function() {
                // Init Table
                var table = SVG('table')
                console.log($(document).width())
                console.log($(document).width() / 680.0)
                var board = table.svg('<svg style="width:100%;height:100%;" viewBox="0 0 700 590" xmlns="http://www.w3.org/2000/svg"> <g> <title>Netrunner</title> <rect stroke="#000000" fill="#fc6262" stroke-width="2" x="11.99998" y="323" width="582" height="136" id="run_programs"/> <rect stroke="#000000" fill="#fc6262" stroke-width="2" x="13.50001" y="469" width="350.99997" height="103" id="run_resources"/> <rect stroke="#000000" fill="#e0cece" stroke-width="2" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" x="550.25" y="101.25" width="199.49999" height="81" id="corp_counter" transform="rotate(90 650 141.75)"/> <rect stroke="#000000" fill="#3f6fff" stroke-width="2" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" x="12.5" y="134" width="582.49998" height="164" id="corp_ice"/> <rect stroke="#000000" fill="#fc6262" stroke-width="2" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" x="372.5" y="469" width="67" height="102" id="run_identity"/> <rect stroke="#000000" fill="#3f6fff" stroke-width="2" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" x="12.75002" y="15.5" width="356.99998" height="108.5" id="corp_assets"/> <rect stroke="#000000" fill="#3f6fff" stroke-width="2" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" x="381.25001" y="16.25" width="63.5" height="107.5" id="corp_identity"/> <rect id="corp_deck" stroke="#000000" fill="#3f6fff" stroke-width="2" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" x="456.25001" y="16.25" width="63.5" height="107.5"/> <rect id="corp_discard" stroke="#000000" fill="#3f6fff" stroke-width="2" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" x="531.25001" y="16.25" width="63.5" height="107.5"/> <rect id="run_deck" stroke="#000000" fill="#fc6262" stroke-width="2" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" x="448.5" y="469" width="67" height="102"/> <rect id="run_discard" stroke="#000000" fill="#fc6262" stroke-width="2" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" x="526.5" y="470" width="67" height="102"/> <rect id="run_counter" stroke="#000000" fill="#e0cece" stroke-width="2" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" x="550.25" y="412.5" width="199.49999" height="81" transform="rotate(90 650 453)"/> </g> </svg>')
                console.log(board)

                // Load All Card Images
                var cards = function() {
                    var images = []
                    var total_cards = 113
                    var wl = [320.0, 450.0]
                    var scaler = 0.6
                    for(var i = 1; i <= total_cards; i++) {
                        images.push(table.image('games/netrunner/images/' + i + ".jpg", wl[0] * scaler, wl[1] * scaler))
                    }
                    return images
                }();

                // Create Card Wall
                // var cards_per_row = Math.floor($(document).width() / 320)

                var cardDragStart = function(delta, e) {
                    this.front()
                }

                var cardDragEnd = function(delta, e) {
                    this.backward()
                }


                for(var i = 0; i < cards.length; i++) {
                    cards[i].draggable()
                    cards[i].dragstart = cardDragStart
                    cards[i].dragend = cardDragEnd
                //     cards[i].move((i % cards_per_row) * 320.0, Math.floor(i / cards_per_row) * 450.0)
                }
                console.log(cards[0])
            })
        </script>

        <!--[if lt IE 9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    </head>
    <body>
        <div id="table">

        </div>
    </body>

</html>